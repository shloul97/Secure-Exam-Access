define("local_secureaccess/action",["jquery","core/ajax"],(function($,Ajax){return{init:function(){$("button[name=action-btn]").click((function(){var deviceId=$(this).attr("data-id"),action=$(this).attr("data-action"),btn=$(this),spanText=$("#span-"+deviceId),dataAction="sus";if("sus"==action&&(dataAction="act"),"del"===action){if(1==confirm("Are You sure you want to delete record ?")){var requestArgs={deviceid:parseInt(deviceId),action:action.toString()};Ajax.call([{methodname:"local_secureaccess_update_labs",args:requestArgs}])[0].then((function(){$("#tr-"+deviceId).fadeOut(300)})).catch((function(err){let error="<span>AJAX Error: ".concat(err," <span><br><span>\n                    Error: ").concat(err.message,"</span><br><span>Args were :").concat(requestArgs,"</span>");$("#ajx-err").html(error)}))}}else{requestArgs={deviceid:parseInt(deviceId),action:action.toString()};Ajax.call([{methodname:"local_secureaccess_update_labs",args:requestArgs}])[0].then((function(){"del"!=action&&(btn.attr("data-action",dataAction),btn.toggleClass("btn-warning btn-success"),"Suspend"===btn.html()?(btn.html("Activate"),spanText.html("Inactive")):(btn.html("Suspend"),spanText.html("Active")),spanText.toggleClass("text-success text-danger"))})).catch((function(err){let error="<span>AJAX Error: ".concat(err," <span><br><span> Error:\n                      ").concat(err.message,"</span><br><span>Args were :").concat(requestArgs,"</span>");$("#ajx-err").html(error)}))}})),$("button[name=admin-btn]").click((function(){var dataAction=$(this).attr("data-action"),btn=$(this),deviceId=$(this).attr("data-id"),lab=btn.attr("data-lab"),confirmString="";if(confirmString="mkadmin"==dataAction?"Are You sure you want to make this device Admin ?":"Are You sure you want to Remove this device From Admin ?",1==confirm(confirmString)){var requestArgs={deviceid:parseInt(deviceId,10),action:"admin".toString(),dataaction:dataAction.toString(),lab:parseInt(lab,10)};Ajax.call([{methodname:"local_secureaccess_update_labs",args:requestArgs}])[0].then((function(e){1==e.status&&(btn.toggleClass("btn-primary btn-secondary"),"mkadmin"===dataAction?(dataAction="rmadmin",btn.html("Remove Admin"),btn.attr("data-action","rmadmin")):"rmadmin"===dataAction&&(btn.html("Make Admin"),btn.attr("data-action","mkadmin")))})).catch((function(err){let error="<span>AJAX Error: ".concat(err," <span><br><span>\n                      Error: ").concat(err.message,"</span><br><span>Args were :").concat(requestArgs,"</span>");$("#ajx-err").html(error)}))}}))}}}));

//# sourceMappingURL=action.min.js.map